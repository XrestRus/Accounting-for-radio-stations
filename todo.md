# Проект учета устройств для депо - План реализации

## Текущий статус

- [x] Установлен Symfony
- [x] Созданы базовые контроллеры
- [x] Подготовлены шаблоны Twig
- [x] Подготовлена HTML-верстка

## Инфраструктура разработки

- [x] Настроить Docker для разработки (docker-compose)
- [x] Настроить подключение к базе данных (.env)

## База данных и тестовые данные

- [x] Создать Entity для User (пользователи)
- [x] Создать Entity для Employee (сотрудники)
- [x] Создать Entity для Device (устройства)
- [x] Создать Entity для Transaction (операции выдачи/возврата)
- [x] Создать Entity для Log (логи операций)
- [x] Создать миграции базы данных
- [x] Создать скрипт для заполнения тестовыми данными (DataFixtures)
- [x] Выполнить миграции и заполнить БД тестовыми данными

## Реализация интерфейсов и функционала

### 1. Экран управления устройствами

- [x] Реализовать список устройств с фильтрацией и поиском
- [x] Создать FormType для Device
- [x] Реализовать добавление нового устройства
- [x] Реализовать редактирование устройства
- [x] Реализовать удаление устройства
- [x] Реализовать изменение статуса устройства
- [x] Подключить форму редактирования устройства (верстка из device-edit.html)
- [x] Мягкое удаление записей из базы - статус `Списано`
- [x] убрать возможность менять статус из списка устройств и со страницы добавления/редактирования устройства
- [x] Добавить проверку уникальности QR-кода устройства, не должно быть устройств с одинаковыми qr-кодами
- [x] Верни модальное окно для просмотра информации об устройстве на страницу Управление устройствами (она есть в верстке в markup - devices.html)

### 2. Экран выдачи устройства

- [x] Реализовать форму выбора сотрудника
- [x] Реализовать форму выбора/сканирования устройства
- [x] Реализовать валидацию доступности устройства
- [x] Реализовать функцию выдачи устройства

### 3. Экран возврата устройства

- [x] Реализовать форму выбора/сканирования устройства
- [x] Реализовать отображение информации о выданном устройстве
- [x] Реализовать функцию возврата устройства
- [x] Реализовать обработку статуса возврата (исправно/неисправно)
- [x] Подгружать информацию о устройстве в форме выдачи и возврата устройства ajax запросом

### 4. Экран управления сотрудниками

- [x] Создать FormType для Employee
- [x] Реализовать список сотрудников с поиском
- [x] Реализовать добавление нового сотрудника
- [x] Реализовать редактирование сотрудника
- [x] Реализовать удаление сотрудника
- [x] Подключить форму редактирования сотрудника (верстка из employee-edit.html)

### 5. Экран журнала учета

- [x] Реализовать таблицу операций с фильтрацией
- [x] Реализовать функцию экспорта данных в Excel

### 6. Экран авторизации

- [x] Настроить систему аутентификации
- [x] Реализовать Security/LoginFormAuthenticator
- [x] Реализовать SecurityController полностью
- [x] Настроить проверку ролей и ограничение доступа
- [x] Реализовать форму входа
- [x] Реализовать обработку ошибок авторизации
- [x] Убрать заглушку авторизации в DeviceController::issue

### 7. Главный экран (Dashboard)

- [x] Реализовать отображение списка выданных устройств
- [x] Реализовать отображение просроченных возвратов
- [x] Добавить быстрый доступ к основным функциям

### 8. Экран управления пользователями

- [x] Создать FormType для User
- [x] Реализовать список пользователей
- [x] Реализовать добавление нового пользователя
- [x] Реализовать редактирование пользователя
- [x] Реализовать удаление пользователя
- [x] Создать страницу списка пользователей (верстка из users.html)
- [x] Создать страницу добавления/редактирования пользователя (верстка из user-edit.html)

### 9. Экран отчетов

- [x] Реализовать форму параметров отчета
- [x] Реализовать генерацию отчета по выданным устройствам
- [x] Реализовать генерацию отчета по возвращенным устройствам
- [x] Реализовать генерацию отчета по просроченным возвратам
- [x] Реализовать экспорт отчетов в Excel

### 10. Экран инструкции и справки

- [x] Проверить актуальность инструкцией по использованию системы, страница help

## Тестирование и документация

- [x] Написать unit-тесты для основных сущностей
- [ ] Написать функциональные тесты для основных функций (не смог)
- [x] Настроить Docker для production
- [x] Обновить документацию по развертыванию

## Доработки

- [x] Вынести из DeviceController статусы в модель Device
- [x] Убрать из формы логина - Забыли пароль?
- [x] Починить выпадающее меню, привести к одному виду, на всех страницах
- [x] Убрать Настройки из главного меню, включая контроллер и шаблоны
- [x] убрать Профиль из меню пользователя
- [x] В Управление устройствами в таблице если устройство выдано, то вывести кому выдано (под статусом), то же самое и в модальном окне
- [x] В Управление устройствами если устройство выдано и просроченно, то выводить лейбл с просрочкой
- [x] Все операции с устройствами должны логироваться в таблице logs
- [x] В роле оператор, разрешены только операции выдачи и возврата устройств и Журнал учета и Управление устройствами
- [x] При добавление и редактирование устройства добавить прикрепление картинки
