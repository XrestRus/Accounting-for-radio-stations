{% extends 'base.html.twig' %}

{% block title %}Учет радиостанций - Справка (печатная версия){% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        @media print {
            body {
                font-size: 12pt;
            }
            .navbar, .sidebar {
                display: none !important;
            }
            .content-wrapper {
                width: 100% !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            .help-content h2 {
                page-break-before: always;
                margin-top: 20px;
            }
            .help-content h2:first-child {
                page-break-before: avoid;
            }
            footer {
                display: none !important;
            }
            .no-print {
                display: none !important;
            }
            a {
                text-decoration: none !important;
                color: #000 !important;
            }
            .print-header {
                text-align: center;
                margin-bottom: 20px;
            }
            .print-footer {
                text-align: center;
                margin-top: 20px;
                font-size: 10pt;
                color: #666;
            }
        }
    </style>
{% endblock %}

{% block body %}
<div class="no-print d-flex justify-content-between align-items-center mb-4">
    <h1>Справка (печатная версия)</h1>
    <div>
        <button type="button" class="btn btn-outline-primary" onclick="window.print()">
            <i class="bi bi-printer"></i> Печать
        </button>
        <a href="{{ path('app_help') }}" class="btn btn-outline-secondary ms-2">
            <i class="bi bi-arrow-left"></i> Вернуться
        </a>
    </div>
</div>

<div class="print-header">
    <h1>Учет радиостанций</h1>
    <h2>Руководство пользователя</h2>
    <p>Версия 1.0</p>
</div>

<div class="card">
    <div class="card-body help-content">
        <section id="introduction">
            <h2>Введение</h2>
            <p>Добро пожаловать в систему "Учет радиостанций"! Данная система предназначена для автоматизации процессов учета, выдачи и возврата радиостанций и других устройств в организации.</p>
            <p>Система позволяет вести учет устройств, контролировать их выдачу и возврат, отслеживать сроки возврата, а также формировать отчеты по использованию устройств.</p>
            <p>В этой справке вы найдете информацию о том, как пользоваться системой, описание основных функций и ответы на часто задаваемые вопросы.</p>
        </section>

        <section id="getting-started" class="mt-4">
            <h2>Начало работы</h2>
            <p>Для начала работы с системой необходимо авторизоваться, используя свои учетные данные (логин и пароль). После успешной авторизации вы попадете на главную страницу системы, где представлена общая информация о состоянии устройств и последних операциях.</p>
            <p>Навигация по системе осуществляется с помощью бокового меню, которое содержит следующие разделы:</p>
            <ul>
                <li><strong>Главная</strong> - общая информация и статистика</li>
                <li><strong>Выдача устройств</strong> - оформление выдачи устройств сотрудникам</li>
                <li><strong>Возврат устройств</strong> - оформление возврата устройств от сотрудников</li>
                <li><strong>Управление устройствами</strong> - добавление, редактирование и удаление устройств</li>
                <li><strong>Журнал учета</strong> - история операций выдачи и возврата устройств</li>
                <li><strong>Сотрудники</strong> - управление данными о сотрудниках</li>
                <li><strong>Отчеты</strong> - формирование различных отчетов</li>
                <li><strong>Управление пользователями</strong> - настройка прав доступа и управление пользователями</li>
                <li><strong>Справка</strong> - документация по использованию системы</li>
            </ul>
        </section>

        <section id="issue-device" class="mt-4">
            <h2>Выдача устройств</h2>
            <p>Раздел "Выдача устройств" предназначен для оформления выдачи устройств сотрудникам. Процесс выдачи устройства состоит из следующих шагов:</p>
            <ol>
                <li>Выберите сотрудника из списка</li>
                <li>Укажите срок возврата устройства (дату и время)</li>
                <li>Выберите устройство одним из способов:
                    <ul>
                        <li>Сканирование QR/штрих-кода устройства</li>
                        <li>Ввод серийного номера устройства вручную</li>
                        <li>Выбор устройства из списка доступных устройств</li>
                    </ul>
                </li>
                <li>Проверьте информацию о выбранном устройстве</li>
                <li>Нажмите кнопку "Выдать устройство" для завершения операции</li>
            </ol>
            <p>После успешного оформления выдачи устройства, информация об операции будет сохранена в журнале учета, а статус устройства изменится на "Выдано".</p>
            <div class="alert alert-info mt-3">
                <h5>Важно!</h5>
                <p>Выдать можно только устройства со статусом "Доступно". Устройства со статусом "Выдано", "Неисправно" или "Списано" не могут быть выданы.</p>
            </div>
        </section>

        <section id="return-device" class="mt-4">
            <h2>Возврат устройств</h2>
            <p>Раздел "Возврат устройств" предназначен для оформления возврата устройств от сотрудников. Процесс возврата устройства состоит из следующих шагов:</p>
            <ol>
                <li>Выберите устройство для возврата одним из способов:
                    <ul>
                        <li>Сканирование QR/штрих-кода устройства</li>
                        <li>Ввод серийного номера устройства вручную</li>
                        <li>Выбор устройства из списка выданных устройств</li>
                    </ul>
                </li>
                <li>Проверьте информацию о выбранном устройстве и сотруднике</li>
                <li>Укажите состояние устройства (исправно или неисправно)</li>
                <li>Если устройство неисправно, укажите причину неисправности</li>
                <li>При необходимости добавьте комментарий</li>
                <li>Нажмите кнопку "Принять устройство" для завершения операции</li>
            </ol>
            <p>После успешного оформления возврата устройства, информация об операции будет сохранена в журнале учета, а статус устройства изменится на "Доступно" или "Неисправно" в зависимости от указанного состояния.</p>
        </section>

        <section id="devices-management" class="mt-4">
            <h2>Управление устройствами</h2>
            <p>Раздел "Управление устройствами" предназначен для добавления, редактирования и удаления устройств в системе. В этом разделе вы можете:</p>
            <ul>
                <li>Просматривать список всех устройств</li>
                <li>Фильтровать устройства по типу, статусу и другим параметрам</li>
                <li>Добавлять новые устройства</li>
                <li>Редактировать информацию о существующих устройствах</li>
                <li>Удалять устройства из системы</li>
                <li>Просматривать подробную информацию об устройстве</li>
            </ul>
            <p>Для добавления нового устройства нажмите кнопку "Добавить устройство" и заполните форму с информацией об устройстве. Обязательными полями являются название устройства, тип устройства и серийный номер.</p>
            <p>Для редактирования информации об устройстве нажмите кнопку "Редактировать" напротив соответствующего устройства в списке.</p>
            <p>Для удаления устройства нажмите кнопку "Удалить" напротив соответствующего устройства в списке и подтвердите операцию.</p>
        </section>

        <section id="employees-management" class="mt-4">
            <h2>Управление сотрудниками</h2>
            <p>Раздел "Сотрудники" предназначен для управления данными о сотрудниках организации. В этом разделе вы можете:</p>
            <ul>
                <li>Просматривать список всех сотрудников</li>
                <li>Фильтровать сотрудников по подразделению и другим параметрам</li>
                <li>Добавлять новых сотрудников</li>
                <li>Редактировать информацию о сотрудниках</li>
                <li>Удалять сотрудников из системы</li>
            </ul>
            <p>Для добавления нового сотрудника нажмите кнопку "Добавить сотрудника" и заполните форму с информацией о сотруднике. Обязательными полями являются ФИО, табельный номер и подразделение.</p>
            <p>Для редактирования информации о сотруднике нажмите кнопку "Редактировать" напротив соответствующего сотрудника в списке.</p>
            <p>Для удаления сотрудника нажмите кнопку "Удалить" напротив соответствующего сотрудника в списке и подтвердите операцию.</p>
        </section>

        <section id="journal" class="mt-4">
            <h2>Журнал учета</h2>
            <p>Раздел "Журнал учета" предназначен для просмотра истории операций выдачи и возврата устройств. В этом разделе вы можете:</p>
            <ul>
                <li>Просматривать список всех операций</li>
                <li>Фильтровать операции по дате, типу операции, устройству, сотруднику и другим параметрам</li>
                <li>Просматривать подробную информацию об операции</li>
                <li>Экспортировать журнал операций в формате Excel</li>
            </ul>
            <p>Для экспорта журнала в формате Excel нажмите кнопку "Экспорт" и выберите параметры экспорта.</p>
        </section>

        <section id="reports" class="mt-4">
            <h2>Отчеты</h2>
            <p>Раздел "Отчеты" предназначен для формирования различных отчетов по использованию устройств. В этом разделе вы можете:</p>
            <ul>
                <li>Формировать отчет по выданным устройствам</li>
                <li>Формировать отчет по возвращенным устройствам</li>
                <li>Формировать отчет по просроченным возвратам</li>
                <li>Экспортировать отчеты в формате Excel</li>
            </ul>
            <p>Для формирования отчета выберите тип отчета, укажите параметры (период, подразделение и т.д.) и нажмите кнопку "Сформировать".</p>
            <p>Для экспорта отчета в формате Excel нажмите кнопку "Экспорт" на странице сформированного отчета.</p>
        </section>

        <section id="user-access" class="mt-4">
            <h2>Управление пользователями</h2>
            <p>Раздел "Управление пользователями" доступен только администраторам системы и предназначен для управления учетными записями пользователей. В этом разделе вы можете:</p>
            <ul>
                <li>Просматривать список всех пользователей</li>
                <li>Добавлять новых пользователей</li>
                <li>Редактировать информацию о пользователях</li>
                <li>Изменять роли пользователей</li>
                <li>Блокировать и разблокировать пользователей</li>
                <li>Удалять пользователей из системы</li>
            </ul>
            <p>В системе предусмотрены следующие роли пользователей:</p>
            <ul>
                <li><strong>Администратор</strong> - имеет полный доступ ко всем функциям системы</li>
                <li><strong>Оператор</strong> - имеет доступ к операциям выдачи и возврата устройств, а также к журналу учета и управлению устройствами</li>
            </ul>
        </section>

        <section id="faq" class="mt-4">
            <h2>Часто задаваемые вопросы</h2>
            <h3>Как изменить статус устройства?</h3>
            <p>Статус устройства изменяется автоматически при выполнении соответствующих операций:</p>
            <ul>
                <li>При выдаче устройства его статус меняется на "Выдано"</li>
                <li>При возврате устройства его статус меняется на "Доступно" или "Неисправно" в зависимости от указанного состояния</li>
            </ul>
            <p>Для списания устройства необходимо изменить его статус на "Списано" через функцию редактирования устройства.</p>
            
            <h3>Что делать, если сотрудник потерял устройство?</h3>
            <p>В случае утери устройства необходимо выполнить следующие действия:</p>
            <ol>
                <li>В разделе "Возврат устройств" найти устройство и вернуть его, указав состояние "Неисправно" и причину "Утеряно"</li>
                <li>В разделе "Управление устройствами" найти данное устройство и изменить его статус на "Списано"</li>
                <li>Документально оформить утерю устройства в соответствии с внутренними правилами организации</li>
            </ol>
            
            <h3>Можно ли изменить срок возврата устройства?</h3>
            <p>Да, срок возврата устройства можно изменить. Для этого необходимо:</p>
            <ol>
                <li>Перейти в раздел "Журнал учета"</li>
                <li>Найти операцию выдачи устройства</li>
                <li>Нажать кнопку "Редактировать" и изменить срок возврата</li>
                <li>Сохранить изменения</li>
            </ol>
        </section>

        <div class="print-footer">
            <p>Система "Учет радиостанций" © {{ "now"|date("Y") }}. Все права защищены.</p>
            <p>Дата печати: {{ "now"|date("d.m.Y H:i:s") }}</p>
        </div>
    </div>
</div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        // Автоматически вызвать печать при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            // Немного задержки для гарантии загрузки стилей
            setTimeout(function() {
                if (window.location.search.includes('autoprint=true')) {
                    window.print();
                }
            }, 500);
        });
    </script>
{% endblock %} 